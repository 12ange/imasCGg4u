<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>デレステの背景の謎輪っか</title>
<style>
</style></head><body>
<script>
"use strict";
<!-- Javascriptはここに -->
const NEW_SVGTAG = (tag) => document.createElementNS("http://www.w3.org/2000/svg",tag);

// PCCS->RGB http://www.wsj21.net/ghp/ghp0c_03.html
// 使うのは、PCCS light 色相環(12色)
const colorstr = ["#d995ac","#f59fa0","#ffb195","#ffc887","#f9e08a","#d9d784","#8dd3ad","#71c5be","#71b1c7","#7e9dc3","#9c95c1","#b48fb5"];
//円環中央部の半径
const innerradius = .875;

//共通値
const rad = 2*Math.PI/colorstr.length;
const dx = Math.sin(rad);
const dy = 1-Math.cos(rad);
const diff = innerradius*Math.sqrt(dx*dx+dy*dy);
//SVG要素
const rootsvg = NEW_SVGTAG("svg");
rootsvg.style.width = "500px";
rootsvg.style.height = "500px";
rootsvg.setAttribute("viewBox", "-1 -1 2 2");
//defs要素
const defz = NEW_SVGTAG("defs");
rootsvg.appendChild(defz);
//g要素
const grp = NEW_SVGTAG("g");
rootsvg.appendChild(grp);
//クリップパス準備
const clip = NEW_SVGTAG("clipPath");
clip.id = "ringclip";
clip.setAttribute("clip-rule","evenodd");
let p1 = NEW_SVGTAG("path");
const stripratio   = [150,1, 7,2, 4,15, 0,10, 1,3, 6,1]; //先頭は150/200の空白
const strippattern = [  0,0, 0,0, 1, 0, 0, 1, 0,0, 0,0]; //0=円 1=直前径とジグザグ
//open-close
let stripsum = [];
const striptotal = stripratio.reduce( (a,c)=>{ stripsum.push(a+c); return a+c; },0 );
const stripinrange = stripsum.map( (v)=>v/striptotal );

let dstr = "";
for( let i = 0 ; i < stripinrange.length ; ++i ){
	let r = stripinrange[i];
	if( strippattern[i] === 0 ){
		dstr += `M-${r},0`;
		dstr += `A${r},${r} 0 0 ${i&1} ${r},0`;
		dstr += `A${r},${r} 0 0 ${i&1} -${r},0z`;
	}
	else {
		let q = stripinrange[i-1];
		dstr += `M-${r},0`;
		dstr += `A${r},${r} 0 0 ${i&1} ${r},0`;
		dstr += `L${q},0`;
		dstr += `A${q},${q} 0 0 ${i&1} -${q},0z`;
	}
	// a rx,ry 楕円の傾き 大回り(1|0) 時計回り(1|0) x,y
}
p1.setAttribute("d",dstr);

clip.appendChild(p1);
defz.appendChild(clip);
grp.setAttribute("clip-path",`url(#${clip.id})`);
//円形に配置
for( let index = 0 ; index < colorstr.length ; ++index ){
	//グラデーション設定
	let raGdt = NEW_SVGTAG("radialGradient");
	raGdt.id = `filler${index}`;
	let s1 = NEW_SVGTAG("stop");
	s1.setAttribute("offset","0");
	s1.setAttribute("stop-color",colorstr[index]);
	s1.setAttribute("stop-opacity","1");
	let s2 = NEW_SVGTAG("stop");
	s2.setAttribute("offset","1");
	s2.setAttribute("stop-color",colorstr[index]);
	s2.setAttribute("stop-opacity","0");
	raGdt.appendChild(s1);
	raGdt.appendChild(s2);
	defz.appendChild(raGdt);
	//上を利用した円の描画
	let c1 = NEW_SVGTAG("circle");
	c1.cx.baseVal.value = innerradius*Math.sin(2*Math.PI*index/colorstr.length);
	c1.cy.baseVal.value = innerradius*Math.cos(2*Math.PI*index/colorstr.length);
	c1.r.baseVal.value = diff;
	c1.style.fill = `url(#${raGdt.id})`;
	grp.appendChild(c1);
}

document.body.appendChild(rootsvg);

</script></body></html>
